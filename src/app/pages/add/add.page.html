<ion-content>
  <section id="add">

    <app-navbar [returnButton]="true"></app-navbar>
  
    <!-- ──────────── -->
    <!--     FORM     -->
    <!-- ──────────── -->

    <form class="form" #addExerciseForm="ngForm" (ngSubmit)="onAddExercise(addExerciseForm)">

      <h2 class="title margin-top-0">Exercise information</h2>

      <input    class="input" type="text" [(ngModel)]="newExercise.name"        name="name"        placeholder="Exercise name"        autocomplete="off" required>
      <textarea class="input" type="text" [(ngModel)]="newExercise.description" name="description" placeholder="Exercise description" autocomplete="off" rows="5"></textarea>
      <input    class="input" type="text" [(ngModel)]="newExercise.machine"     name="machine"     placeholder="Exercise machine"     autocomplete="off">

      <h2 class="title">Muscle group</h2>

      <div class="muscle-group">
        <input  class="input"  type="text"   [(ngModel)]="muscleGroup" name="muscleGroup" placeholder="Muscle group" autocomplete="off">
        <button class="button" type="button" (click)="addMuscleGroup()">
          <i class="fa fa-plus" aria-hidden="true"></i>
        </button>
      </div>

      <div class="muscle-group-inserted" *ngIf="newExercise.muscleGroups.length > 0">
        <div class="item" *ngFor="let mg of newExercise.muscleGroups">
          <div class="input">{{ mg }}</div>
          <button class="button" type="button" (click)="removeMuscleGroup(mg)">
            <i class="fa fa-minus" aria-hidden="true"></i>
          </button>
        </div>
      </div>

      <h2 class="title">Days to be done</h2>
      
      <div *ngIf="newExercise.days !== undefined">
        <div *ngFor="let day of dayNames; let i = index">
          {{dayNames[i]}}
          <input type="checkbox" [(ngModel)]="newExercise.days[i]" name="{{dayNames[i]}}">
        </div>
      </div>

      <h2 class="title">Images</h2>
      
      <button class="button" type="button" (click)="pickImages()">Select images</button>
      <!-- <ion-input type="file" accept="image/*" (change) = "imagePicked($event)">Select images</ion-input> -->

      <ion-item>  
        <ion-row *ngIf="newExercise.images">  
          <ion-col style="padding:10px;" size="4" *ngFor="let image of newExercise.images; let imageIndex = index">  
            <ion-card>  
              <ion-thumbnail item-start (click)="removeImage(imageIndex)">  
                <img src={{image.url}} alt="Sample Image">  
              </ion-thumbnail>  
            </ion-card>  
          </ion-col>  
        </ion-row>  
      </ion-item>

      <h2 class="title">Video</h2>

      <input class="input" [(ngModel)]="newExercise.video" name="video" placeholder="Video description">
      <!-- [pattern]="http(?:s?):\/\/(?:www\.)?youtu(?:be\.com\/watch\?v=|\.be\/)([\w\-\_]*)(&(amp;)?[\w\?=]*)?" -->

      <button class="button width-100" type="submit" [disabled]="!addExerciseForm.form.valid" id="submit_btn">Add exercise</button>

    </form>
  </section>
</ion-content>
